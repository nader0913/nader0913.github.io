<!DOCTYPE html>
<html lang="en">

<head>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <!-- Markdown parser (GitHub-Flavored) -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- Polyfill for MathJax -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <!-- MathJax for LaTeX support -->
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="UTF-8">
  <title>nader0913</title>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/article.css">
</head>

<body>
  <div id="main-title">
    <h1>nader0913</h1>
  </div>

  <nav id="main-nav">
    <a href="#blog" class="nav-item active" onclick="return showPage('blog', this)">Blog</a>
    <a href="#projects" class="nav-item" onclick="return showPage('projects', this)">Projects</a>
    <a href="#about" class="nav-item" onclick="return showPage('about', this)">About</a>
  </nav>

  <div id="blog-page" class="page-content active">
    <div id="main-page">
    </div>
  </div>

  <div id="projects-page" class="page-content">
    <div id="projects-list">
    </div>
  </div>

  <div id="about-page" class="page-content">
    <div class="cv-content">
      <div class="cv-intro">
        <p>Software engineer with experience in high-performance systems and cryptographic solutions. Focused on
          building secure, scalable applications across diverse technology environments.</p>
      </div>

      <div class="cv-timeline">
        <div class="cv-item">
          <div class="cv-year">2025</div>
          <div class="cv-details">
            <div class="cv-role">Junior Software Engineer @ Alpitronic</div>
            <div class="cv-location">Munich, Germany</div>
            <ul class="cv-desc">
              <li>Working on OCPP 2.0.1 Certification in C++</li>
            </ul>
          </div>
        </div>

        <div class="cv-item">
          <div class="cv-year">2024</div>
          <div class="cv-details">
            <div class="cv-role">Software Engineer Intern @ EcoG</div>
            <div class="cv-location">Munich, Germany • Mar-Sep</div>
            <ul class="cv-desc">
              <li>Developed high throughput solutions for SECC to module communication, including OCMF Meters
                integration</li>
              <li>Contributed to OCPP 2.0 Certification process under OCTT framework</li>
            </ul>
          </div>
        </div>

        <div class="cv-item">
          <div class="cv-year">2023</div>
          <div class="cv-details">
            <div class="cv-role">Software Engineer Intern @ Arcium</div>
            <div class="cv-location">Switzerland • Jun-Dec</div>
            <ul class="cv-desc">
              <li>Developed MVP integrating SPDZ-based multi-party computation for secure key generation and transaction
                screening</li>
              <li>Implemented cryptographic solutions using Zero Knowledge Proofs and Homomorphic Encryption</li>
              <li>Authored technical blogs on elliptic curves and homomorphic encryption</li>
            </ul>
          </div>
        </div>

        <div class="cv-item">
          <div class="cv-year">2022</div>
          <div class="cv-details">
            <div class="cv-role">Software Engineer Intern @ SAP</div>
            <div class="cv-location">Mougins, France • Jul-Sep</div>
            <ul class="cv-desc">
              <li>Built modular email template generator reducing integration time by 50% and eliminating 7000 lines of
                code</li>
              <li>Implemented i18n solution for multi-language emails, cutting translation costs by 50%</li>
              <li>Enhanced UI, implemented caching, and comprehensive testing</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="post-content">
    <div class="top-nav">
      <a href="#" class="back-link" onclick="goBack()">&larr; Back</a>
      <div class="article-chapter" id="article-chapter"></div>
      <div class="article-date" id="article-date"></div>
    </div>
    <div class="article-title" id="article-title"></div>
    <div id="markdown-output"></div>
    <div class="nav-links">
      <a href="#" onclick="prevPost()">&larr; Previous</a>
      <a href="#" onclick="nextPost()">Next &rarr;</a>
    </div>
  </div>

  <script>
    const posts = [
      { file: 'pareto-distribution.md', title: 'Pareto Distribution and Wealth Disparity', slug: 'pareto-distribution', tags: ['Distributions'], date: 'Jul 23, 2021' },
      { file: 'baader-meinhof-phenomenon.md', title: 'Baader Meinhof Phenomenon', slug: 'baader-meinhof-phenomenon', tags: ['Phenomenons'], date: '10 Dec, 2023' },
      { file: 'goldilocks-rule-and-flow-state.md', title: 'Goldilocks Rule and Flow State', slug: 'goldilocks-rule-and-flow-state', tags: ['Phenomenons'], date: '24 Nov, 2024' },
      { file: 'homomorphic-encryption.md', title: 'Homomorphic Encryption for Dummies', slug: 'homomorphic-encryption', tags: ['Cryptography'], date: 'Nov 12, 2023' },
      { file: 'shamir-secret-sharing.md', title: 'Shamir Secret Sharing', slug: 'shamir-secret-sharing', tags: ['Cryptography'], date: 'Nov 12, 2023' },
      { file: 'plain-english.md', title: 'How to write in Plain English', slug: 'plain-english', tags: ['Writing'], date: 'Aug 19, 2025' },
    ];

    const projects = [
      { file: 'veilcomm.md', title: 'Veilcomm - Partial Tor Network Implementation in Rust', slug: 'veilcomm', tags: ['Privacy', 'Rust'], date: 'Nov, 2024' }
    ];

    function renderMainPage() {
      const container = document.getElementById('main-page');
      container.innerHTML = '';

      // Sort all posts by date (newest first)
      const sortedPosts = posts
        .slice()
        .sort((a, b) => new Date(b.date) - new Date(a.date));

      sortedPosts.forEach((post, index) => {
        const link = document.createElement('a');
        link.href = `/#/${post.slug}`;
        link.className = 'toc-entry';
        link.target = '_blank';
        link.onclick = (e) => {
          if (e.button === 0 && !e.ctrlKey && !e.metaKey && !e.shiftKey) {
            e.preventDefault();
            loadPost(post.slug);
            return false;
          }
        };


        const titleSpan = document.createElement('span');
        titleSpan.className = 'toc-title';
        titleSpan.textContent = post.title;

        const metaDiv = document.createElement('div');
        metaDiv.className = 'toc-meta';

        const chapterSpan = document.createElement('span');
        chapterSpan.className = 'toc-chapter';
        chapterSpan.textContent = Array.isArray(post.tags) ? post.tags.join(', ') : post.tags;

        const dateSpan = document.createElement('span');
        dateSpan.className = 'toc-date';
        dateSpan.textContent = post.date;

        metaDiv.appendChild(chapterSpan);
        metaDiv.appendChild(dateSpan);

        link.appendChild(titleSpan);
        link.appendChild(metaDiv);
        container.appendChild(link);
      });
    }

    function renderProjectsPage() {
      const container = document.getElementById('projects-list');
      container.innerHTML = '';

      // Sort all projects by date (newest first)
      const sortedProjects = projects
        .slice()
        .sort((a, b) => new Date(b.date) - new Date(a.date));

      sortedProjects.forEach((project, index) => {
        const link = document.createElement('a');
        link.href = `/#/${project.slug}`;
        link.className = 'toc-entry';
        link.target = '_blank';
        link.onclick = (e) => {
          if (e.button === 0 && !e.ctrlKey && !e.metaKey && !e.shiftKey) {
            e.preventDefault();
            loadPost(project.slug);
            return false;
          }
        };

        const titleSpan = document.createElement('span');
        titleSpan.className = 'toc-title';
        titleSpan.textContent = project.title;

        const metaDiv = document.createElement('div');
        metaDiv.className = 'toc-meta';

        const chapterSpan = document.createElement('span');
        chapterSpan.className = 'toc-chapter';
        chapterSpan.textContent = Array.isArray(project.tags) ? project.tags.join(', ') : project.tags;

        const dateSpan = document.createElement('span');
        dateSpan.className = 'toc-date';
        dateSpan.textContent = project.date;

        metaDiv.appendChild(chapterSpan);
        metaDiv.appendChild(dateSpan);

        link.appendChild(titleSpan);
        link.appendChild(metaDiv);
        container.appendChild(link);
      });
    }

    let currentIndex = 0;

    function showPage(pageId, element) {
      // Hide all page contents
      document.querySelectorAll('.page-content').forEach(page => {
        page.style.display = 'none';
        page.classList.remove('active');
      });

      // Remove active from all nav items
      document.querySelectorAll('.nav-item').forEach(nav => {
        nav.classList.remove('active');
      });

      // Show selected page and activate nav item
      const targetPage = document.getElementById(pageId + '-page');
      if (targetPage) {
        targetPage.style.display = 'block';
        targetPage.classList.add('active');
      }

      if (element) {
        element.classList.add('active');
      }

      // Render content for specific pages
      if (pageId === 'projects') {
        renderProjectsPage();
      }

      return false; // prevent default link behavior
    }

    function goBack() {
      document.getElementById('post-content').style.display = 'none';
      document.getElementById('main-title').style.display = 'block';
      document.getElementById('main-nav').style.display = 'flex';
      document.querySelector('.page-content.active').style.display = 'block';
    }

    function prevPost() {
      if (currentIndex > 0) {
        loadPost(posts[currentIndex - 1].slug);
      }
    }

    function nextPost() {
      if (currentIndex < posts.length - 1) {
        loadPost(posts[currentIndex + 1].slug);
      }
    }

    function parseMarkdown(md) {
      // First, escape the escaped dollar signs with a temporary marker
      md = md.replace(/\\\$/g, 'ESCAPED_DOLLAR_SIGN');

      // 1) Split into blocks on blank lines
      const blocks = md.split(/\n{2,}/).map(block => {
        const t = block.trim();

        // 2) Table detection
        if (/^\|.+\n\|[-:| ]+\n?/.test(block)) {
          return renderTable(block);
        }

        // 3) Ordered list detection
        if (/^\s*\d+\.\s+/.test(t)) {
          const items = t
            .split('\n')
            .map(line => {
              const m = line.match(/^\s*\d+\.\s+(.*)$/);
              return m ? `<li>${m[1]}</li>` : '';
            })
            .join('');
          return `<div class="article-list"><ol>${items}</ol></div>`;
        }

        // 3b) Unordered list detection
        if (/^\s*-\s+/.test(t)) {
          const items = t
            .split('\n')
            .map(line => {
              const m = line.match(/^\s*-\s+(.*)$/);
              return m ? `<li>${m[1]}</li>` : '';
            })
            .join('');
          return `<div class="article-list"><ul>${items}</ul></div>`;
        }

        // 4) Block‐level detection
        const isBlock =
          t.startsWith('> ') ||
          t.startsWith('#') ||
          t.startsWith('<div') ||
          t.startsWith('<blockquote') ||
          t.startsWith('<img') ||
          t.startsWith('$$');

        if (isBlock) return t;

        // 5) Default paragraph
        return `<div class="article-paragraph">${t}</div>`;
      });

      // 6) Run the pipeline for headings, ULs, styling, etc.
      let html = blocks.join('\n\n')
        // Headings
        .replace(/^### (.*$)/gim, '<div class="article-subsubheader">$1</div>')
        .replace(/^## (.*$)/gim, '<div class="article-subheader">$1</div>')
        .replace(/^# (.*$)/gim, '<div class="article-header">$1</div>')
        // Bold & italic
        .replace(/\*\*(.*?)\*\*/gim, '<b>$1</b>')
        .replace(/\*(.*?)\*/gim, '<i>$1</i>')
        // Images
        .replace(
          /!\[(.*?)\]\((.*?)\)/gim,
          '<div class="article-image"><img alt="$1" src="$2"><p>$1</p></div>'
        )
        // Links
        .replace(/\[(.*?)\]\((.*?)\)/gim, '<a href="$2" target="_blank">$1</a>')
        // Blockquotes
        .replace(/^>\s?(.*)$/gim, '<div class="article-blockquote">$1</div>')

      // 7) Inline math: $...$ → \(...\)
      html = html.replace(/\$(.+?)\$/g, (_, expr) => `\\(${expr}\\)`);

      // Finally, restore the escaped dollar signs
      html = html.replace(/ESCAPED_DOLLAR_SIGN/g, '$');

      // 8) Return—but first let MathJax render it into #markdown-output
      if (window.MathJax) {
        MathJax.typesetPromise([html]).then(() => {
          document.getElementById('markdown-output').innerHTML = html;
        });
      }
      return html;
    }


    function renderTable(tableMd) {
      const lines = tableMd.trim().split('\n');
      const headers = lines[0].split('|').slice(1, -1).map(h => h.trim());
      const rows = lines.slice(2).map(r =>
        r.split('|').slice(1, -1).map(c => c.trim())
      );

      let tableHtml = '<table class="article-table"><thead><tr class="article-table-row">';
      headers.forEach(h => tableHtml += `<th class="article-table-header">${h}</th>`);
      tableHtml += '</tr></thead><tbody>';
      rows.forEach(cells => {
        tableHtml += '<tr class="article-table-row">';
        cells.forEach(c => tableHtml += `<td class="article-table-cell">${c}</td>`);
        tableHtml += '</tr>';
      });
      tableHtml += '</tbody></table>';

      return tableHtml;
    }


    window.addEventListener('hashchange', handleHashRoute);
    window.addEventListener('DOMContentLoaded', handleHashRoute);
    window.addEventListener('DOMContentLoaded', renderMainPage);

    // Initialize the blog page on load
    window.addEventListener('DOMContentLoaded', () => {
      // Hide all pages initially
      document.querySelectorAll('.page-content').forEach(page => {
        page.style.display = 'none';
      });
      // Show blog page by default
      document.getElementById('blog-page').style.display = 'block';
    });

    function handleHashRoute() {
      const slug = window.location.hash.replace(/^#\/?/, '');
      if (slug) {
        loadPost(slug);
      } else {
        goBack();
      }
    }

    function loadPost(slug) {
      // Check both posts and projects
      let post = posts.find(p => p.slug === slug);
      let isProject = false;

      if (!post) {
        post = projects.find(p => p.slug === slug);
        isProject = true;
      }

      if (!post) return;

      currentIndex = isProject ? projects.indexOf(post) : posts.indexOf(post);

      fetch(post.file)
        .then(r => r.text())
        .then(md => {
          document.getElementById('main-nav').style.display = 'none';
          document.querySelector('.page-content.active').style.display = 'none';
          document.getElementById('main-title').style.display = 'none';
          document.getElementById('post-content').style.display = 'block';
          document.getElementById('markdown-output').innerHTML = parseMarkdown(md);
          document.getElementById('article-chapter').innerText = Array.isArray(post.tags) ? post.tags.join(' • ') : post.tags;
          document.getElementById('article-title').innerText = post.title;
          document.getElementById('article-date').innerText = (post.date || '');
          window.scrollTo(0, 0);

          // Typeset MathJax after content is loaded
          if (window.MathJax) {
            MathJax.typesetPromise();
          }
        });
    }

    window.onpopstate = (e) => {
      if (e.state?.slug) loadPost(e.state.slug);
      else goBack();
    };

    window.addEventListener('DOMContentLoaded', () => {
      const slug = window.location.pathname.slice(1);
      if (slug) loadPost(slug);
    });
  </script>
</body>

<footer id="main-footer">
  <p>Copyright 2025 — Contact: <a href="mailto:nader.business.mail@gmail.com">nader.business.mail@gmail.com</a></p>
</footer>

</html>